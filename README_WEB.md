# Tepora Web Interface - ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

## ğŸ¯ æ¦‚è¦

TeporaãŒWebã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«å¯¾å¿œã—ã¾ã—ãŸï¼ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªåŒ–ã‚‚è¦‹æ®ãˆãŸã€ãƒ¢ãƒ€ãƒ³ã§ä½¿ã„ã‚„ã™ã„UIã‚’æä¾›ã—ã¾ã™ã€‚

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **FastAPI** - é«˜é€ŸãªéåŒæœŸWebãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **WebSocket** - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°é€šä¿¡
- **Uvicorn** - ASGIã‚µãƒ¼ãƒãƒ¼

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **React 18** - UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **TypeScript** - å‹å®‰å…¨æ€§
- **Vite** - é«˜é€Ÿãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«
- **Tailwind CSS** - ãƒ¢ãƒ€ãƒ³ãªã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
- **Lucide React** - ã‚¢ã‚¤ã‚³ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

### å°†æ¥ã®ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªåŒ–
ã“ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯ **Electron** ã§ãƒ©ãƒƒãƒ—ã™ã‚‹ã ã‘ã§ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã«ãªã‚Šã¾ã™ï¼š
```bash
# å°†æ¥ã®æ‰‹é †ï¼ˆå‚è€ƒï¼‰
npm install electron electron-builder
# package.json ã« electron è¨­å®šã‚’è¿½åŠ 
npm run electron:build
```

## ğŸ“¦ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. Pythonä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# æ—¢å­˜ã®ä¾å­˜é–¢ä¿‚ã«åŠ ãˆã¦ã€Webé–¢é€£ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt
```

**æ–°è¦è¿½åŠ ã•ã‚ŒãŸä¾å­˜é–¢ä¿‚:**
- `fastapi>=0.104.1`
- `uvicorn[standard]>=0.24.0`
- `websockets>=12.0`
- `chromadb>=0.4.18`

### 2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
cd frontend
npm install
```

## ğŸš€ èµ·å‹•æ–¹æ³•

### Option 1: è‡ªå‹•èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆæ¨å¥¨ï¼‰

#### Windows
```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰èµ·å‹•ï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«1ï¼‰
start_server.bat

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•ï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«2ï¼‰
start_frontend.bat
```

#### macOS/Linux
```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰èµ·å‹•ï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«1ï¼‰
chmod +x start_server.sh
./start_server.sh

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•ï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«2ï¼‰
chmod +x start_frontend.sh
./start_frontend.sh
```

### Option 2: æ‰‹å‹•èµ·å‹•

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§å®Ÿè¡Œ
python web_server.py
```

ã‚µãƒ¼ãƒãƒ¼ã¯ `http://localhost:8000` ã§èµ·å‹•ã—ã¾ã™ã€‚
- APIä»•æ§˜: `http://localhost:8000/docs`
- WebSocket: `ws://localhost:8000/ws/chat`

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
```bash
cd frontend
npm run dev
```

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ `http://localhost:5173` ã§èµ·å‹•ã—ã¾ã™ã€‚

### 3. ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹

ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:5173` ã‚’é–‹ãã¾ã™ã€‚

## ğŸ¨ æ©Ÿèƒ½

### ãƒãƒ£ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰
- **ğŸ’¬ ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒ¢ãƒ¼ãƒ‰**: ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ (Gemma 3N) ãŒç›´æ¥å¿œç­”
- **ğŸ” æ¤œç´¢ãƒ¢ãƒ¼ãƒ‰**: Googleæ¤œç´¢ã‚’ä½¿ç”¨ã—ã¦æœ€æ–°æƒ…å ±ã‚’å–å¾—
- **ğŸ¤– ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ¢ãƒ¼ãƒ‰**: ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ (Jan-nano) ãŒãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½
- **WebSocketã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°**: å¿œç­”ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¡¨ç¤º
- **æ¥ç¶šã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: æ¥ç¶šçŠ¶æ…‹ã‚’è¦–è¦šçš„ã«ç¢ºèª
- **EM-LLMçµ±è¨ˆ**: ãƒ¡ãƒ¢ãƒªã‚·ã‚¹ãƒ†ãƒ ã®çŠ¶æ…‹ã‚’è¡¨ç¤º

### UI/UX
- **ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰**: ç›®ã«å„ªã—ã„ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒ
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³**: ãƒ¢ãƒã‚¤ãƒ«ã§ã‚‚ä½¿ã„ã‚„ã™ã„
- **ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ**: Enteré€ä¿¡ã€Shift+Enterã§æ”¹è¡Œ
- **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**: ã‚¹ãƒ ãƒ¼ã‚ºãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
Tepora_Project/
â”œâ”€â”€ web_server.py              # FastAPIãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”œâ”€â”€ start_server.bat           # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (Windows)
â”œâ”€â”€ start_frontend.bat         # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (Windows)
â”œâ”€â”€ requirements.txt           # Pythonä¾å­˜é–¢ä¿‚ (æ›´æ–°æ¸ˆã¿)
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ package.json           # Node.jsä¾å­˜é–¢ä¿‚
â”‚   â”œâ”€â”€ vite.config.ts         # Viteè¨­å®š
â”‚   â”œâ”€â”€ tsconfig.json          # TypeScriptè¨­å®š
â”‚   â”œâ”€â”€ tailwind.config.js     # Tailwind CSSè¨­å®š
â”‚   â”œâ”€â”€ index.html             # HTMLã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ main.tsx           # Reactã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚       â”œâ”€â”€ App.tsx            # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚       â”œâ”€â”€ components/        # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚       â”‚   â”œâ”€â”€ ChatInterface.tsx
â”‚       â”‚   â”œâ”€â”€ MessageList.tsx
â”‚       â”‚   â”œâ”€â”€ InputArea.tsx
â”‚       â”‚   â””â”€â”€ StatusBar.tsx
â”‚       â”œâ”€â”€ hooks/             # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚       â”‚   â””â”€â”€ useWebSocket.ts
â”‚       â”œâ”€â”€ types/             # TypeScriptå‹å®šç¾©
â”‚       â”‚   â””â”€â”€ index.ts
â”‚       â””â”€â”€ styles/            # ã‚¹ã‚¿ã‚¤ãƒ«
â”‚           â””â”€â”€ index.css
â””â”€â”€ Tepora_app/                # æ—¢å­˜ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ­ã‚¸ãƒƒã‚¯
    â””â”€â”€ agent_core/
        â””â”€â”€ ...
```

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒãƒ¼ãƒˆãŒæ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹
```bash
# ãƒãƒ¼ãƒˆ8000ãŒä½¿ç”¨ä¸­ã®å ´åˆ
# web_server.py ã®æœ€ä¸‹éƒ¨ã‚’ç·¨é›†:
uvicorn.run("web_server:app", host="0.0.0.0", port=8001, reload=True)
```

### WebSocketæ¥ç¶šã‚¨ãƒ©ãƒ¼
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
- ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®šã‚’ç¢ºèª
- ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèª

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼
```bash
# node_modulesã‚’å‰Šé™¤ã—ã¦å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd frontend
rm -rf node_modules
npm install
```

## ğŸš¢ æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ“ãƒ«ãƒ‰
```bash
cd frontend
npm run build
```

ãƒ“ãƒ«ãƒ‰æˆæœç‰©ã¯ `frontend/dist/` ã«ç”Ÿæˆã•ã‚Œã¾ã™ã€‚

### ã‚µãƒ¼ãƒãƒ¼è¨­å®š
`web_server.py` ã®æœ€ä¸‹éƒ¨ã‚’ç·¨é›†ï¼š
```python
if __name__ == "__main__":
    import uvicorn
    uvicorn.run(
        "web_server:app",
        host="0.0.0.0",
        port=8000,
        reload=False,  # æœ¬ç•ªç’°å¢ƒã§ã¯False
        log_level="info"
    )
```

é™çš„ãƒ•ã‚¡ã‚¤ãƒ«é…ä¿¡ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’è§£é™¤ï¼š
```python
# web_server.py ã®æœ«å°¾ä»˜è¿‘
app.mount("/", StaticFiles(directory="frontend/dist", html=True), name="static")
```

## ğŸ“ é–‹ç™ºè€…å‘ã‘æƒ…å ±

### API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### REST API
- `GET /api/health` - ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
- `GET /api/status` - ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

#### WebSocket
- `WS /ws/chat` - ãƒãƒ£ãƒƒãƒˆé€šä¿¡ã¨çŠ¶æ…‹é€šçŸ¥

**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆå—ä¿¡: `status`ï¼‰:**
```json
{
  "type": "status",
  "message": "ç¾åœ¨ã®å‡¦ç†çŠ¶æ…‹ï¼ˆä¾‹: 'Processing...'ï¼‰"
}
```

**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆé€ä¿¡ï¼‰:**
```json
{
  "message": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›",
  "mode": "direct" | "search" | "agent"
}
```

**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆå—ä¿¡ï¼‰:**
```json
{
  "type": "response" | "status" | "error" | "stats",
  "message": "AIã®å¿œç­”",
  "data": { ... }
}
```

### ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

#### ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ã®å¤‰æ›´
`frontend/tailwind.config.js` ã® `primary` ã‚«ãƒ©ãƒ¼ã‚’ç·¨é›†

#### ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å¤‰æ›´
`Tepora_app/agent_core/config.py` ã® `BASE_SYSTEM_PROMPTS` ã‚’ç·¨é›†

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

æ—¢å­˜ã®Teporaãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨åŒã˜ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãŒé©ç”¨ã•ã‚Œã¾ã™ã€‚

## ğŸ™ è¬è¾

- [FastAPI](https://fastapi.tiangolo.com/)
- [React](https://react.dev/)
- [Vite](https://vitejs.dev/)
- [Tailwind CSS](https://tailwindcss.com/)
- [Lucide](https://lucide.dev/)
