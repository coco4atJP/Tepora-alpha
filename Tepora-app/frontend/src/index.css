@import "tailwindcss";
@config "../tailwind.config.cjs";

/* 
  THEMING SYSTEM
  - :root (Default) -> Tepora Theme (Tea/Black/Gold)
  - [data-theme="light"] -> Light Theme (Porcelain/Tea/Charcoal)
  - [data-theme="dark"] -> Neutral Dark Theme (Slate/Gray)
*/

:root {
	/* TEPORA THEME (Default / Dark - Cafe & Retro-Futurism) */
	--bg-app: #120c0a;
	/* Deep warm espresso/tea brown instead of black */
	--bg-panel: rgba(26, 17, 14, 0.85);
	--bg-overlay: rgba(20, 12, 10, 0.7);

	--text-primary: #fdfaf6;
	/* Soft warm white */
	--text-secondary: #d1bfae;
	/* Warm latte/tea text */
	--text-accent: #fcd34d;
	/* Soft bright gold (amber-300/gold-400) */

	--border-subtle: rgba(255, 230, 200, 0.08);
	/* Warm subtle border */
	--border-highlight: rgba(255, 215, 150, 0.15);
	/* Warmer highlight */

	/* Added global radius for softness */
	--radius-base: 1.25rem;
	--radius-sm: 0.75rem;

	/* Glassmorphism Variables - Dark Default (Warmer, softer glow) */
	--glass-bg: rgba(26, 17, 14, 0.65);
	--glass-border-color: rgba(255, 220, 180, 0.1);
	--glass-highlight: rgba(219, 114, 37, 0.15);

	--glass-gradient-base: linear-gradient(135deg,
			rgba(38, 24, 20, 0.7) 0%,
			rgba(20, 12, 10, 0.8) 100%);
	--glass-gradient-tepora:
		radial-gradient(circle at 50% 0%,
			rgba(219, 140, 37, 0.15) 0%,
			transparent 60%),
		linear-gradient(135deg,
			rgba(80, 30, 15, 0.8),
			rgba(160, 65, 30, 0.6),
			rgba(240, 200, 50, 0.15));

	--glass-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.5);
	--glass-shadow-tepora:
		0 20px 50px -10px rgba(10, 5, 0, 0.6),
		inset 0 0 0 1px rgba(255, 230, 180, 0.05);

	--input-bg: rgba(20, 12, 10, 0.5);
	--input-bg-focus: rgba(30, 15, 10, 0.7);
	--input-border: rgba(255, 230, 200, 0.1);

	--button-glass-bg: rgba(255, 240, 220, 0.05);
	--button-glass-border: rgba(255, 240, 220, 0.1);

	color-scheme: dark;
}

[data-theme="light"] {
	/* LIGHT THEME (Cafe / Milk Tea) */
	--bg-app: #fcf8f2;
	/* Milk tea / Porcelain */
	--bg-panel: rgba(255, 255, 255, 0.85);
	--bg-overlay: rgba(250, 240, 230, 0.7);

	--text-primary: #3b2f2f;
	/* Dark cocoa */
	--text-secondary: #8c7366;
	/* Milk chocolate text */
	--text-accent: #d97736;
	/* Warm Assam tea */

	--border-subtle: rgba(140, 115, 100, 0.12);
	--border-highlight: rgba(140, 115, 100, 0.25);

	--radius-base: 1.25rem;
	--radius-sm: 0.75rem;

	/* Glassmorphism Variables - Light (Warmer, sweeter) */
	--glass-bg: rgba(255, 255, 255, 0.7);
	--glass-border-color: rgba(255, 255, 255, 0.6);
	--glass-highlight: rgba(219, 140, 37, 0.08);

	--glass-gradient-base: linear-gradient(135deg,
			rgba(255, 255, 255, 0.9) 0%,
			rgba(250, 245, 238, 0.8) 100%);
	--glass-gradient-tepora: linear-gradient(135deg,
			rgba(255, 252, 248, 0.95),
			rgba(255, 240, 230, 0.8),
			rgba(250, 235, 180, 0.4));

	--glass-shadow: 0 8px 30px 0 rgba(100, 70, 50, 0.06);
	--glass-shadow-tepora:
		0 12px 35px -5px rgba(120, 60, 30, 0.12),
		inset 0 0 0 1px rgba(255, 255, 255, 0.8);

	--input-bg: rgba(255, 255, 255, 0.6);
	--input-bg-focus: rgba(255, 255, 255, 0.95);
	--input-border: rgba(140, 115, 100, 0.15);

	--button-glass-bg: rgba(255, 255, 255, 0.8);
	--button-glass-border: rgba(140, 115, 100, 0.15);

	color-scheme: light;
}

[data-theme="dark"] {
	/* NEUTRAL DARK THEME (Slightly warmer off-black) */
	--bg-app: #121214;
	--bg-panel: rgba(24, 24, 28, 0.85);
	--bg-overlay: rgba(15, 15, 18, 0.8);

	--text-primary: #f8fafc;
	--text-secondary: #94a3b8;
	--text-accent: #60a5fa;

	--border-subtle: rgba(255, 255, 255, 0.08);
	--border-highlight: rgba(255, 255, 255, 0.15);

	--radius-base: 1.25rem;
	--radius-sm: 0.75rem;

	/* Glassmorphism Variables - Neutral Dark */
	--glass-bg: rgba(24, 24, 28, 0.7);
	--glass-border-color: rgba(255, 255, 255, 0.08);
	--glass-highlight: rgba(255, 255, 255, 0.05);

	--glass-gradient-base: linear-gradient(135deg,
			rgba(35, 40, 50, 0.8),
			rgba(20, 22, 28, 0.9));
	--glass-gradient-tepora: linear-gradient(135deg,
			rgba(40, 48, 65, 0.85),
			rgba(55, 65, 85, 0.6),
			rgba(70, 85, 110, 0.3));

	--glass-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.5);
	--glass-shadow-tepora: 0 10px 40px -10px rgba(0, 0, 0, 0.5);

	--input-bg: rgba(24, 24, 28, 0.6);
	--input-bg-focus: rgba(30, 30, 35, 0.9);
	--input-border: rgba(255, 255, 255, 0.1);

	--button-glass-bg: rgba(255, 255, 255, 0.05);
	--button-glass-border: rgba(255, 255, 255, 0.1);

	color-scheme: dark;
}

@layer base {
	body {
		color: var(--text-primary);
		background-color: var(--bg-app);
		overflow: hidden;
		transition:
			background-color 0.3s ease,
			color 0.3s ease;
	}
}

/* Custom Utilities */
/* Deprecated old .glass-tepora - mapped to new system below if still used directly */

/* Animations */
@keyframes message-in {
	0% {
		opacity: 0;
		transform: translateY(20px) scale(0.98);
	}

	100% {
		opacity: 1;
		transform: translateY(0) scale(1);
	}
}

@keyframes shimmer {
	from {
		transform: translateX(-100%);
	}

	to {
		transform: translateX(100%);
	}
}

.animate-message-in {
	animation: message-in 0.25s ease-out both;
}

/* Safe area helpers */
.pb-safe {
	padding-bottom: env(safe-area-inset-bottom);
}

.pt-safe {
	padding-top: env(safe-area-inset-top);
}

/* Scrollbar */
.custom-scrollbar {
	scrollbar-width: thin;
	scrollbar-color: var(--border-highlight) transparent;
}

/* Markdown (chat) */
.chat-markdown code::before,
.chat-markdown code::after {
	content: "";
}

.prose-theme {
	--tw-prose-body: var(--text-primary);
	--tw-prose-headings: var(--text-primary);
	--tw-prose-lead: var(--text-secondary);
	--tw-prose-links: var(--text-accent);
	--tw-prose-bold: var(--text-primary);
	--tw-prose-counters: var(--text-secondary);
	--tw-prose-bullets: var(--text-secondary);
	--tw-prose-hr: var(--border-subtle);
	--tw-prose-quotes: var(--text-primary);
	--tw-prose-quote-borders: var(--border-highlight);
	--tw-prose-captions: var(--text-secondary);
	--tw-prose-code: var(--text-primary);
	--tw-prose-pre-code: var(--text-primary);
	--tw-prose-pre-bg: var(--bg-overlay);
	--tw-prose-th-borders: var(--border-subtle);
	--tw-prose-td-borders: var(--border-subtle);
	color: var(--text-primary);
}

.prose-theme h1,
.prose-theme h2,
.prose-theme h3,
.prose-theme h4,
.prose-theme strong,
.prose-theme code {
	color: var(--text-primary);
}

.prose-theme a {
	color: var(--text-accent);
}

.prose-theme code {
	background-color: var(--bg-overlay);
}

.prose-theme blockquote {
	color: var(--text-secondary);
	border-left-color: var(--border-highlight);
}

@media (prefers-reduced-motion: reduce) {

	.animate-fade-in,
	.animate-modal-enter,
	.animate-message-in {
		animation: none;
	}
}

/* Updated Setup Wizard & Glassmorphism Components */
@layer components {
	.setup-card {
		position: relative;
		overflow: hidden;
		border-radius: 0.75rem;
		border: 1px solid var(--border-subtle);
		background: var(--bg-panel);
		padding: 1rem;
		transition: all 0.3s ease;
	}

	.setup-card:hover {
		border-color: var(--text-accent);
		box-shadow: 0 0 20px var(--glass-highlight);
		transform: translateY(-2px);
	}

	.setup-card.active {
		border-color: var(--text-accent);
		background: var(--glass-highlight);
		box-shadow: 0 0 25px rgba(250, 227, 51, 0.15);
		/* Keep gold glow slightly consistent but maybe vary later */
	}

	.glass-terminal {
		background: var(--bg-panel);
		border: 1px solid var(--border-subtle);
		backdrop-filter: blur(12px);
		border-radius: 0.5rem;
		font-family: monospace;
		font-size: 0.75rem;
		box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06);
	}

	/* REFACTORED GLASSMORPHISM SYSTEM (Soft & Warm) */

	/* Base Glass - Optimized for depth */
	.glass-base {
		backdrop-filter: blur(20px);
		-webkit-backdrop-filter: blur(20px);
		background: var(--glass-gradient-base);
		border: 1px solid var(--glass-border-color);
		box-shadow: var(--glass-shadow);
		border-radius: var(--radius-base);
	}

	/* Primary Panel - "Tea Tray" Look */
	.glass-tepora {
		backdrop-filter: blur(24px);
		-webkit-backdrop-filter: blur(24px);
		background: var(--glass-gradient-tepora);
		border: 1px solid var(--glass-border-color);
		border-top: 1px solid rgba(255, 255, 255, 0.15);
		/* Slightly stronger top rim string */
		box-shadow: var(--glass-shadow-tepora);
		border-radius: var(--radius-base);
	}

	.glass-panel {
		backdrop-filter: blur(24px);
		-webkit-backdrop-filter: blur(24px);
		background: var(--glass-gradient-base);
		border: 1px solid var(--glass-border-color);
		box-shadow: var(--glass-shadow);
		border-radius: var(--radius-base);
		transition:
			transform 0.4s cubic-bezier(0.16, 1, 0.3, 1),
			box-shadow 0.4s cubic-bezier(0.16, 1, 0.3, 1),
			border-color 0.4s ease;
	}

	.glass-panel:hover {
		box-shadow: var(--glass-shadow-tepora);
		transform: translateY(-2px);
		border-color: var(--border-highlight);
	}

	/* Refined Button Style (Softer, rounder) */
	.glass-button {
		background: var(--button-glass-bg);
		backdrop-filter: blur(12px);
		border: 1px solid var(--button-glass-border);
		box-shadow: 0 4px 10px -2px rgba(0, 0, 0, 0.1);
		border-radius: var(--radius-sm);
		transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
	}

	.glass-button:hover {
		background: var(--glass-highlight);
		border-color: var(--text-accent);
		transform: translateY(-1px);
		box-shadow: 0 6px 15px -3px rgba(0, 0, 0, 0.15), 0 0 12px var(--glass-highlight);
	}

	/* Input Fields */
	.glass-input {
		background: var(--input-bg);
		border: 1px solid var(--input-border);
		backdrop-filter: blur(12px);
		border-radius: var(--radius-sm);
		transition: all 0.3s ease;
		box-shadow: inset 0 2px 6px 0 rgba(0, 0, 0, 0.1);
	}

	.glass-input:focus {
		background: var(--input-bg-focus);
		border-color: var(--text-accent);
		box-shadow:
			inset 0 2px 6px 0 rgba(0, 0, 0, 0.1),
			0 0 0 1px var(--text-accent),
			0 0 20px var(--glass-highlight);
	}

	/* Text Gradients */
	.text-gradient-gold {
		background: linear-gradient(to right, #fcd34d, #d4bf80);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-clip: text;
	}

	.text-cinzel {
		font-family: "Cinzel", serif;
	}
}

@keyframes slide-up {
	from {
		opacity: 0;
		transform: translateY(20px);
	}

	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes scale-in {
	from {
		opacity: 0;
		transform: scale(0.95);
	}

	to {
		opacity: 1;
		transform: scale(1);
	}
}

.animate-slide-up {
	animation: slide-up 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-scale-in {
	animation: scale-in 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-shimmer {
	background: linear-gradient(90deg,
			transparent,
			var(--border-highlight),
			transparent);
	background-size: 200% 100%;
	animation: shimmer 2s infinite linear;
}

@keyframes float-gentle {

	0%,
	100% {
		transform: translateY(0);
	}

	50% {
		transform: translateY(-5px);
	}
}

.animate-float-gentle {
	animation: float-gentle 4s ease-in-out infinite;
}

.scrollbar-stable {
	scrollbar-gutter: stable;
}

/* NEW ANIMATIONS FOR VISUAL IMPROVEMENTS */

/* Neural Pulse Animation */
@keyframes neural-pulse {
	0% {
		transform: scale(1);
		opacity: 0.5;
		box-shadow: 0 0 0 0 rgba(240, 227, 51, 0.4);
	}

	70% {
		transform: scale(1.05);
		opacity: 0.8;
		box-shadow: 0 0 20px 10px rgba(240, 227, 51, 0);
	}

	100% {
		transform: scale(1);
		opacity: 0.5;
		box-shadow: 0 0 0 0 rgba(240, 227, 51, 0);
	}
}

.animate-neural-pulse {
	animation: neural-pulse 2s infinite ease-in-out;
}

/* Sound Wave Animation */
@keyframes sound-wave {

	0%,
	100% {
		height: 4px;
		opacity: 0.5;
	}

	50% {
		height: 16px;
		opacity: 1;
	}
}

.animate-sound-wave {
	animation: sound-wave 1s ease-in-out infinite;
}

/* Border Glow Utility */
.glow-border {
	position: relative;
}

.glow-border::after {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	border-radius: inherit;
	border: 1px solid transparent;
	background: linear-gradient(45deg, transparent 40%, rgba(240, 227, 51, 0.3), transparent 60%) border-box;
	-webkit-mask:
		linear-gradient(#fff 0 0) padding-box,
		linear-gradient(#fff 0 0);
	mask:
		linear-gradient(#fff 0 0) padding-box,
		linear-gradient(#fff 0 0);
	-webkit-mask-composite: xor;
	mask-composite: exclude;
	background-size: 200% 200%;
	animation: shimmer 3s infinite linear;
	pointer-events: none;
	z-index: 10;
}