# Tepora Project - åŒ…æ‹¬çš„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ä»•æ§˜æ›¸

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 3.0  
**æœ€çµ‚æ›´æ–°æ—¥**: 2026-01-22  
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦**: ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§å‹•ä½œã™ã‚‹ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ 

---

## ğŸ“‹ ç›®æ¬¡

1. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
2. [ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
3. [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
4. [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ](#ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ )
5. [ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
6. [ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
7. [ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼](#ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼)
8. [APIä»•æ§˜](#apiä»•æ§˜)
9. [è¨­å®šã‚·ã‚¹ãƒ†ãƒ ](#è¨­å®šã‚·ã‚¹ãƒ†ãƒ )
10. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£](#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ãƒ“ã‚¸ãƒ§ãƒ³

Teporaã¯ã€Œ**ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã§å‹•ä½œã™ã‚‹ã€çœŸã®ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å®Ÿç”¨åŒ–**ã€ã‚’ç›®æŒ‡ã™ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå

**Teporaï¼ˆãƒ†ãƒãƒ©ï¼‰** - ã‚¤ã‚¿ãƒªã‚¢èªã®"Tepore"ï¼ˆæ¸©ã‹ã¿ï¼‰ã¨"ora"ï¼ˆç¾åœ¨ï¼‰ã‚’çµ„ã¿åˆã‚ã›ãŸé€ èªã€‚ç´…èŒ¶ãƒ»å–«èŒ¶åº—ã‚’ãƒ†ãƒ¼ãƒã«ã—ãŸã€æ¸©ã‹ã¿ã®ã‚ã‚‹AIãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚’è¡¨ç¾ã—ã¦ã„ã¾ã™ã€‚

### ã‚³ã‚¢ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

| ã‚³ãƒ³ã‚»ãƒ—ãƒˆ | èª¬æ˜ |
|-----------|------|
| **Local First** | ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼æœ€å„ªå…ˆã€‚å…¨å‡¦ç†ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§å®Œçµ |
| **Modular Design** | ä¿å®ˆæ€§ãƒ»æ‹¡å¼µæ€§ãƒ»ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§ã‚’é‡è¦–ã—ãŸãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­è¨ˆ |
| **Stateless Core** | ä¸¦è¡Œå‡¦ç†ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ãªã‚³ã‚¢è¨­è¨ˆ |
| **Hardware Agnostic** | ãƒã‚¤ã‚¨ãƒ³ãƒ‰GPUã‹ã‚‰CPUã¾ã§å¹…åºƒã„ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã§å‹•ä½œ |

### ä¸»è¦æ©Ÿèƒ½

| æ©Ÿèƒ½ | èª¬æ˜ |
|------|------|
| **3ã¤ã®å‹•ä½œãƒ¢ãƒ¼ãƒ‰** | Chatï¼ˆç›´æ¥å¯¾è©±ï¼‰/ Searchï¼ˆWebæ¤œç´¢+RAGï¼‰/ Agentï¼ˆãƒ„ãƒ¼ãƒ«ä½¿ç”¨ï¼‰ |
| **EM-LLM** | ICLR 2025æ¡æŠè«–æ–‡ã«åŸºã¥ãã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰è¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ  |
| **MCPå¯¾å¿œ** | Model Context Protocolã«ã‚ˆã‚‹æ‹¡å¼µå¯èƒ½ãªãƒ„ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ  |
| **RAG** | Retrieval-Augmented Generationã«ã‚ˆã‚‹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ‹¡å¼µ |
| **ãƒšãƒ«ã‚½ãƒŠ** | è¤‡æ•°ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ»ãƒšãƒ«ã‚½ãƒŠã®åˆ‡ã‚Šæ›¿ãˆ |

---

## ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### å…¨ä½“æ§‹æˆå›³

```mermaid
graph TB
    User[ãƒ¦ãƒ¼ã‚¶ãƒ¼] <--> Tauri[Tauri Desktop App]
  
    subgraph Frontend["ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ Layer"]
        React[React + TypeScript]
        Zustand[Zustand Stores]
        WS[WebSocket Client]
        TanStack[TanStack Query]
    end
  
    subgraph Backend["ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ Layer"]
        FastAPI[FastAPI Server]
        
        subgraph Core["Core Application (src/core)"]
            TeporaApp[TeporaApp<br/>Main Facade]
            
            subgraph Graph["Graph Module"]
                TeporaGraph[TeporaGraph]
                ChatNode[ChatNode]
                SearchNode[SearchNode]
            end
            
            subgraph Services["Service Modules"]
                LLM[LLMService<br/>Stateless Factory]
                RAG[RAGEngine<br/>+ ContextBuilder]
                Context[ContextWindowManager]
                Tools[ToolManager]
                Session[SessionManager]
            end
            
            subgraph Memory["Memory Systems"]
                EMLLM[EMLLMIntegrator]
                MemSys[MemorySystem]
            end
        end
      
        subgraph AI["AI Engine"]
            Llama[llama-server<br/>processes]
            Models[GGUF Models]
        end
      
        subgraph Storage["Persistent Storage"]
            Chroma[(ChromaDB<br/>Vector DB)]
            SQLite[(SQLite<br/>Chat History)]
        end
    end
  
    subgraph External["å¤–éƒ¨é€£æº"]
        MCP[MCP Servers]
        Native[Native Tools<br/>Web Searchç­‰]
    end
  
    Tauri <--> React
    React <--> Zustand
    React <--> TanStack
    Zustand <--> WS
    WS <-->|WebSocket| FastAPI
    FastAPI <--> TeporaApp
    TeporaApp <--> TeporaGraph
    TeporaGraph <--> ChatNode
    TeporaGraph <--> SearchNode
    TeporaGraph <--> LLM
    TeporaGraph <--> RAG
    TeporaGraph <--> Context
    TeporaGraph <--> Tools
    TeporaApp <--> Session
    TeporaApp <--> EMLLM
    LLM <--> Llama
    Llama <--> Models
    EMLLM <--> MemSys
    MemSys <--> Chroma
    Session <--> SQLite
    Tools <--> MCP
    Tools <--> Native
```

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä¾å­˜é–¢ä¿‚

```mermaid
graph TD
    App[TeporaApp Facade] --> Graph[Graph Module]
    App --> Session[Session Module]
    App --> EMLLM[EM-LLM Module]
    
    Graph --> Agent[Agent Module]
    Graph --> RAG[RAG Module]
    Graph --> Context[Context Module]
    Graph --> LLM[LLM Module]
    Graph --> Tools[Tools Module]
    
    Agent --> LLM
    Agent --> Tools
    
    RAG --> LLM
    EMLLM --> Memory[Memory Module]
    
    Context --> System[System / Config]
    LLM --> System
    Tools --> System
    Session --> System
```

> [!IMPORTANT]
> **ä¾å­˜ãƒ«ãƒ¼ãƒ«**: ä¸‹ä½ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ä¸Šä½ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãªã„ã€‚`system`ã¨`config`ã¯åŸºç›¤ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦å…¨ã¦ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã€‚

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®éšå±¤

| å±¤ | æŠ€è¡“ | å½¹å‰² |
|----|------|------|
| **ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³** | Tauri + React | UIãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ |
| **çŠ¶æ…‹ç®¡ç†** | Zustand + TanStack Query | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçŠ¶æ…‹ + ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹/ã‚­ãƒ£ãƒƒã‚·ãƒ¥ |
| **é€šä¿¡** | WebSocket + REST | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæ–¹å‘é€šä¿¡ + API |
| **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³** | FastAPI | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç† |
| **ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯** | LangGraph + TeporaApp | ã‚¹ãƒ†ãƒ¼ãƒˆãƒã‚·ãƒ³ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåˆ¶å¾¡ |
| **ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹** | ChromaDB + SQLite | ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ã€æ°¸ç¶šåŒ– |
| **æ¨è«–ã‚¨ãƒ³ã‚¸ãƒ³** | llama.cpp | LLMæ¨è«–å‡¦ç† |

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|---------|------|-----------|------|
| **Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** | FastAPI | 0.124+ | REST API / WebSocket |
| **è¨€èª** | Python | 3.10+ | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ |
| **ASGIã‚µãƒ¼ãƒãƒ¼** | Uvicorn | - | éåŒæœŸã‚µãƒ¼ãƒãƒ¼ |
| **ã‚¹ãƒ†ãƒ¼ãƒˆãƒã‚·ãƒ³** | LangGraph | - | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåˆ¶å¾¡ãƒ•ãƒ­ãƒ¼ |
| **LLMãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** | LangChain | - | LLMçµ±åˆ |
| **æ¨è«–ã‚¨ãƒ³ã‚¸ãƒ³** | llama.cpp | - | GGUFæ¨è«– |
| **ãƒ™ã‚¯ãƒˆãƒ«DB** | ChromaDB | - | ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰è¨˜æ†¶ / RAG |
| **ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«DB** | SQLite | - | ãƒãƒ£ãƒƒãƒˆå±¥æ­´ / ã‚»ãƒƒã‚·ãƒ§ãƒ³ |
| **è¨­å®šç®¡ç†** | PyYAML + Pydantic | - | è¨­å®šã‚¹ã‚­ãƒ¼ãƒ / ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|---------|------|-----------|------|
| **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** | React | 19.x | UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| **è¨€èª** | TypeScript | 5.x | å‹å®‰å…¨æ€§ |
| **ã‚¢ãƒ—ãƒªã‚·ã‚§ãƒ«** | Tauri | 2.x | ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªåŒ– |
| **çŠ¶æ…‹ç®¡ç†** | Zustand | - | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçŠ¶æ…‹ |
| **ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒ** | TanStack Query | 5.x | ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ / ã‚­ãƒ£ãƒƒã‚·ãƒ¥ |
| **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°** | Tailwind CSS | 4.x | ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£CSS |
| **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°** | React Router | 7.x | SPA routing |
| **ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«** | Vite | 7.x | é«˜é€Ÿãƒ“ãƒ«ãƒ‰ |
| **ãƒ†ã‚¹ãƒˆ** | Vitest + Testing Library | - | ãƒ¦ãƒ‹ãƒƒãƒˆ/ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ |

### AIãƒ¢ãƒ‡ãƒ«

| ã‚«ãƒ†ã‚´ãƒª | ãƒ¢ãƒ‡ãƒ«ä¾‹ | ç”¨é€” | æ¨å¥¨ã‚µã‚¤ã‚º |
|---------|---------|------|-----------|
| **Text Model** | Gemma 3n E2B/4B, Ministral 3B, Phi-4 Mini | å¯¾è©± / ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | 2B - 4B (IQ4_XS) |
| **Embedding** | EmbeddingGemma | ãƒ™ã‚¯ãƒˆãƒ«åŸ‹ã‚è¾¼ã¿ | 300M (Q8_0) |

---

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ

```
Tepora_Project/
â”œâ”€â”€ Tepora-app/                 # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æœ¬ä½“
â”‚   â”œâ”€â”€ backend/                # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”‚   â””â”€â”€ frontend/               # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”œâ”€â”€ docs/                       # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ architecture/           # ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ
â”‚   â”‚   â”œâ”€â”€ ARCHITECTURE.md     # æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ ROADMAP.md          # é–‹ç™ºãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—
â”‚   â”‚   â””â”€â”€ refactoring_plan_v2.md  # ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°è¨ˆç”»
â”‚   â”œâ”€â”€ guides/                 # é–‹ç™ºã‚¬ã‚¤ãƒ‰
â”‚   â””â”€â”€ planning/               # è¨ˆç”»ãƒ»ç›£æŸ»ãƒ¬ãƒãƒ¼ãƒˆ
â”œâ”€â”€ scripts/                    # ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ Taskfile.yml               # ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼
â””â”€â”€ README.md
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ§‹é€  (`Tepora-app/backend/`)

```
backend/
â”œâ”€â”€ server.py                   # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ config.yml                  # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
â”œâ”€â”€ models/                     # GGUFãƒ¢ãƒ‡ãƒ«æ ¼ç´
â”œâ”€â”€ bin/                        # llama.cppãƒã‚¤ãƒŠãƒª
â”œâ”€â”€ chroma_db/                  # ChromaDBæ°¸ç¶šåŒ–
â”œâ”€â”€ pyproject.toml              # Pythonä¾å­˜é–¢ä¿‚
â””â”€â”€ src/
    â”œâ”€â”€ tepora_server/          # ========== Web Server Layer ==========
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ app_factory.py      # FastAPIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç”Ÿæˆ
    â”‚   â”œâ”€â”€ state.py            # AppStateï¼ˆã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ç®¡ç†ï¼‰
    â”‚   â”‚
    â”‚   â””â”€â”€ api/                # APIãƒ«ãƒ¼ãƒˆ
    â”‚       â”œâ”€â”€ routes.py       # åŸºæœ¬REST API (/api/status, /api/config)
    â”‚       â”œâ”€â”€ sessions.py     # ã‚»ãƒƒã‚·ãƒ§ãƒ³API (/api/sessions)
    â”‚       â”œâ”€â”€ setup.py        # ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—API (/api/setup)
    â”‚       â”œâ”€â”€ mcp_routes.py   # MCPç®¡ç†API (/api/mcp)
    â”‚       â”œâ”€â”€ ws.py           # WebSocketãƒãƒ³ãƒ‰ãƒ© (/ws)
    â”‚       â”œâ”€â”€ session_handler.py  # WebSocketã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒãƒ³ãƒ‰ãƒ©
    â”‚       â”œâ”€â”€ security.py     # èªè¨¼ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
    â”‚       â”œâ”€â”€ dependencies.py # ä¾å­˜æ€§æ³¨å…¥
    â”‚       â””â”€â”€ exception_handlers.py
    â”‚
    â””â”€â”€ core/                   # ========== Core Business Logic ==========
        â”œâ”€â”€ __init__.py
        â”œâ”€â”€ app_v2.py           # TeporaAppï¼ˆãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ï¼‰
        â”‚
        â”œâ”€â”€ graph/              # -------- Graph Module (Orchestrator) --------
        â”‚   â”œâ”€â”€ __init__.py
        â”‚   â”œâ”€â”€ runtime.py      # TeporaGraphï¼ˆãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ã‚¿ãƒ¼ï¼‰
        â”‚   â”œâ”€â”€ state.py        # AgentStateå®šç¾©
        â”‚   â”œâ”€â”€ constants.py    # GraphNodes, GraphRoutes, InputMode
        â”‚   â”œâ”€â”€ routing.py      # ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯
        â”‚   â”œâ”€â”€ utils.py        # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
        â”‚   â””â”€â”€ nodes/          # ã‚°ãƒ©ãƒ•ãƒãƒ¼ãƒ‰
        â”‚       â”œâ”€â”€ __init__.py
        â”‚       â”œâ”€â”€ chat.py     # ChatNodeï¼ˆç›´æ¥å¯¾è©±ï¼‰
        â”‚       â”œâ”€â”€ search.py   # SearchNodeï¼ˆæ¤œç´¢+è¦ç´„ï¼‰
        â”‚       â”œâ”€â”€ memory.py   # ãƒ¡ãƒ¢ãƒªãƒãƒ¼ãƒ‰
        â”‚       â”œâ”€â”€ conversation.py  # ä¼šè©±ãƒãƒ¼ãƒ‰ï¼ˆV1äº’æ›ï¼‰
        â”‚       â”œâ”€â”€ react.py    # ReActãƒãƒ¼ãƒ‰
        â”‚       â””â”€â”€ em_llm.py   # EM-LLMãƒãƒ¼ãƒ‰
        â”‚
        â”œâ”€â”€ llm/                # -------- LLM Module --------
        â”‚   â”œâ”€â”€ __init__.py
        â”‚   â”œâ”€â”€ service.py      # LLMServiceï¼ˆã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ãƒ•ã‚¡ã‚¯ãƒˆãƒªï¼‰
        â”‚   â”œâ”€â”€ runner.py       # LocalModelRunner Protocol
        â”‚   â”œâ”€â”€ llama_runner.py # LlamaServerRunnerï¼ˆllama.cppç”¨ï¼‰
        â”‚   â”œâ”€â”€ ollama_runner.py # OllamaRunnerï¼ˆå°†æ¥å¯¾å¿œï¼‰
        â”‚   â”œâ”€â”€ process_manager.py  # llama-serverãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†
        â”‚   â”œâ”€â”€ client_factory.py   # LangChainã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”Ÿæˆ
        â”‚   â”œâ”€â”€ model_registry.py   # ãƒ¢ãƒ‡ãƒ«ãƒ‘ã‚¹è§£æ±º
        â”‚   â”œâ”€â”€ executable.py   # å®Ÿè¡Œå½¢å¼ç®¡ç†
        â”‚   â”œâ”€â”€ health.py       # ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
        â”‚   â””â”€â”€ process.py      # ãƒ—ãƒ­ã‚»ã‚¹å®šç¾©
        â”‚
        â”œâ”€â”€ rag/                # -------- RAG Module --------
        â”‚   â”œâ”€â”€ __init__.py
        â”‚   â”œâ”€â”€ engine.py       # RAGEngineï¼ˆãƒãƒ£ãƒ³ã‚¯åé›†ï¼‰
        â”‚   â”œâ”€â”€ context_builder.py  # RAGContextBuilderï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ•´å½¢ï¼‰
        â”‚   â””â”€â”€ manager.py      # SourceManagerï¼ˆã‚½ãƒ¼ã‚¹ç®¡ç†ï¼‰
        â”‚
        â”œâ”€â”€ context/            # -------- Context Module --------
        â”‚   â”œâ”€â”€ __init__.py
        â”‚   â”œâ”€â”€ history.py      # SessionHistoryï¼ˆå±¥æ­´ãƒ©ãƒƒãƒ‘ãƒ¼ï¼‰
        â”‚   â””â”€â”€ window.py       # ContextWindowManagerï¼ˆãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†ï¼‰
        â”‚
        â”œâ”€â”€ agent/              # -------- Agent Module --------
        â”‚   â”œâ”€â”€ __init__.py
        â”‚   â”œâ”€â”€ base.py         # BaseAgentï¼ˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåŸºåº•ï¼‰
        â”‚   â””â”€â”€ registry.py     # AgentRegistryï¼ˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç™»éŒ²ï¼‰
        â”‚
        â”œâ”€â”€ tools/              # -------- Tools Module --------
        â”‚   â”œâ”€â”€ __init__.py
        â”‚   â”œâ”€â”€ manager.py      # ToolManagerï¼ˆçµ±åˆç®¡ç†ï¼‰
        â”‚   â”œâ”€â”€ base.py         # ToolProvideråŸºåº•
        â”‚   â”œâ”€â”€ native.py       # ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ„ãƒ¼ãƒ«ï¼ˆWebæ¤œç´¢ç­‰ï¼‰
        â”‚   â”œâ”€â”€ search/         # -------- Search Tools --------
        â”‚   â”‚   â”œâ”€â”€ base.py     # SearchEngineåŸºåº•
        â”‚   â”‚   â”œâ”€â”€ tool.py     # SearchToolãƒ©ãƒƒãƒ‘ãƒ¼
        â”‚   â”‚   â””â”€â”€ providers/  # æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³å®Ÿè£…
        â”‚   â””â”€â”€ mcp.py          # McpToolProvider
        â”‚
        â”œâ”€â”€ em_llm/             # -------- EM-LLM Module --------
        â”‚   â”œâ”€â”€ __init__.py
        â”‚   â”œâ”€â”€ integrator.py   # EMLLMIntegratorï¼ˆçµ±åˆã‚¯ãƒ©ã‚¹ï¼‰
        â”‚   â”œâ”€â”€ segmenter.py    # EMEventSegmenterï¼ˆã‚¤ãƒ™ãƒ³ãƒˆåˆ†å‰²ï¼‰
        â”‚   â”œâ”€â”€ boundary.py     # å¢ƒç•Œç²¾å¯†åŒ–
        â”‚   â”œâ”€â”€ retrieval.py    # EMTwoStageRetrievalï¼ˆ2æ®µéšæ¤œç´¢ï¼‰
        â”‚   â””â”€â”€ types.py        # EMConfig, EpisodicEvent
        â”‚
        â”œâ”€â”€ system/             # -------- System Module --------
        â”‚   â”œâ”€â”€ __init__.py
        â”‚   â”œâ”€â”€ logging.py      # ãƒ­ã‚°è¨­å®šï¼ˆPIIãƒªãƒ€ã‚¯ã‚·ãƒ§ãƒ³ï¼‰
        â”‚   â””â”€â”€ session.py      # SessionManagerï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ï¼‰
        â”‚
        â”œâ”€â”€ memory/             # -------- Memory Module --------
        â”‚   â”œâ”€â”€ memory_system.py    # MemorySystemï¼ˆChromaDBçµ±åˆï¼‰
        â”‚   â”œâ”€â”€ chroma_store.py     # ChromaDBã‚¹ãƒˆã‚¢
        â”‚   â””â”€â”€ vector_store.py     # ãƒ™ã‚¯ãƒˆãƒ«ã‚¹ãƒˆã‚¢æŠ½è±¡åŒ–
        â”‚
        â”œâ”€â”€ mcp/                # -------- MCP Module --------
        â”‚   â”œâ”€â”€ __init__.py
        â”‚   â”œâ”€â”€ hub.py          # McpHubï¼ˆAPI/ç®¡ç†ç”¨ï¼‰
        â”‚   â”œâ”€â”€ installer.py    # MCPã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼
        â”‚   â”œâ”€â”€ registry.py     # MCPãƒ¬ã‚¸ã‚¹ãƒˆãƒª
        â”‚   â”œâ”€â”€ models.py       # MCPãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
        â”‚   â””â”€â”€ seed.json       # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆMCPã‚µãƒ¼ãƒãƒ¼å®šç¾©
        â”‚
        â”œâ”€â”€ download/           # -------- Download Module --------
        â”‚   â”œâ”€â”€ __init__.py
        â”‚   â”œâ”€â”€ manager.py      # DownloadManager
        â”‚   â”œâ”€â”€ binary.py       # llama.cppãƒã‚¤ãƒŠãƒªDL
        â”‚   â”œâ”€â”€ models.py       # ãƒ¢ãƒ‡ãƒ«DLå‡¦ç†
        â”‚   â”œâ”€â”€ progress.py     # é€²æ—è¿½è·¡
        â”‚   â””â”€â”€ types.py        # å‹å®šç¾©
        â”‚
        â”œâ”€â”€ models/             # -------- Model Management --------
        â”‚   â””â”€â”€ ...             # ãƒ¢ãƒ‡ãƒ«ç®¡ç†ãƒ­ã‚¸ãƒƒã‚¯
        â”‚
        â”œâ”€â”€ config/             # -------- Config Module --------
        â”‚   â”œâ”€â”€ __init__.py     # å…¬é–‹API
        â”‚   â”œâ”€â”€ schema.py       # Pydanticã‚¹ã‚­ãƒ¼ãƒ
        â”‚   â”œâ”€â”€ loader.py       # è¨­å®šãƒ­ãƒ¼ãƒ‰ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        â”‚   â”œâ”€â”€ app.py          # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
        â”‚   â”œâ”€â”€ service.py      # è¨­å®šã‚µãƒ¼ãƒ“ã‚¹
        â”‚   â”œâ”€â”€ agents.py       # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ»ãƒšãƒ«ã‚½ãƒŠè¨­å®š
        â”‚   â”œâ”€â”€ prompts.py      # ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
        â”‚   â””â”€â”€ memory.py       # ãƒ¡ãƒ¢ãƒªé–¢é€£å®šæ•°
        â”‚
        â”œâ”€â”€ app/                # -------- App Utilities --------
        â”‚   â”œâ”€â”€ startup_validator.py  # èµ·å‹•ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        â”‚   â””â”€â”€ utils.py        # sanitize_user_input ãªã©
        â”‚
        â”œâ”€â”€ common/             # -------- Common Utilities --------
        â”‚   â””â”€â”€ security.py     # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
        â”‚
        â””â”€â”€ a2a/                # -------- A2A Protocol --------
            â””â”€â”€ __init__.py     # Agent-to-Agentæ©Ÿèƒ½ï¼ˆå°†æ¥ï¼‰
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ§‹é€  (`Tepora-app/frontend/`)

```
frontend/
â”œâ”€â”€ package.json                # npmä¾å­˜é–¢ä¿‚
â”œâ”€â”€ tsconfig.json               # TypeScriptè¨­å®š
â”œâ”€â”€ vite.config.ts              # Viteè¨­å®š
â”œâ”€â”€ tailwind.config.cjs         # Tailwindè¨­å®š
â”œâ”€â”€ index.html
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.tsx                # Reactã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ App.tsx                 # ãƒ«ãƒ¼ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ index.css               # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â”œâ”€â”€ i18n.ts                 # å›½éš›åŒ–è¨­å®š (i18next)
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/                 # ========== ZustandçŠ¶æ…‹ç®¡ç† ==========
â”‚   â”‚   â”œâ”€â”€ index.ts            # ã‚¹ãƒˆã‚¢ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ chatStore.ts        # ãƒãƒ£ãƒƒãƒˆçŠ¶æ…‹ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ï¼‰
â”‚   â”‚   â”œâ”€â”€ sessionStore.ts     # ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ï¼ˆä¸€è¦§ã€ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰
â”‚   â”‚   â””â”€â”€ websocketStore.ts   # WebSocketæ¥ç¶šçŠ¶æ…‹
â”‚   â”‚
â”‚   â”œâ”€â”€ components/             # ========== UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ ==========
â”‚   â”‚   â”œâ”€â”€ Layout.tsx          # ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”œâ”€â”€ ChatInterface.tsx   # ãƒãƒ£ãƒƒãƒˆãƒ“ãƒ¥ãƒ¼
â”‚   â”‚   â”œâ”€â”€ MessageList.tsx     # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒªã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ MessageBubble.tsx   # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒ–ãƒ«
â”‚   â”‚   â”œâ”€â”€ InputArea.tsx       # å…¥åŠ›ã‚¨ãƒªã‚¢
â”‚   â”‚   â”œâ”€â”€ DialControl.tsx     # ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ãƒ€ã‚¤ã‚¢ãƒ«
â”‚   â”‚   â”œâ”€â”€ PersonaSwitcher.tsx # ãƒšãƒ«ã‚½ãƒŠåˆ‡æ›¿
â”‚   â”‚   â”œâ”€â”€ AgentStatus.tsx     # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçŠ¶æ…‹è¡¨ç¤º
â”‚   â”‚   â”œâ”€â”€ StatusBar.tsx       # ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼
â”‚   â”‚   â”œâ”€â”€ SearchResults.tsx   # æ¤œç´¢çµæœè¡¨ç¤º
â”‚   â”‚   â”œâ”€â”€ SystemStatusPanel.tsx  # ã‚·ã‚¹ãƒ†ãƒ è©³ç´°ãƒ‘ãƒãƒ«
â”‚   â”‚   â”œâ”€â”€ RagContextPanel.tsx    # RAGã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ‘ãƒãƒ«
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ SetupWizard/        # ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰
â”‚   â”‚   â”‚   â”œâ”€â”€ SetupWizard.tsx
â”‚   â”‚   â”‚   â””â”€â”€ steps/          # ã‚¹ãƒ†ãƒƒãƒ—ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ SessionHistory/     # ã‚»ãƒƒã‚·ãƒ§ãƒ³å±¥æ­´
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ settings/           # è¨­å®šç”»é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ components/     # è¨­å®šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ sections/       # è¨­å®šã‚»ã‚¯ã‚·ãƒ§ãƒ³
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ chat/               # ãƒãƒ£ãƒƒãƒˆé–¢é€£ãƒ‘ãƒ¼ãƒ„
â”‚   â”‚   â””â”€â”€ ui/                 # æ±ç”¨UIãƒ‘ãƒ¼ãƒ„
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                  # ========== ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ ==========
â”‚   â”‚   â”œâ”€â”€ useSettings.ts      # è¨­å®šç®¡ç†
â”‚   â”‚   â”œâ”€â”€ useSessions.ts      # ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ useMcp.ts           # MCPç®¡ç†
â”‚   â”‚   â”œâ”€â”€ useServerConfig.ts  # ã‚µãƒ¼ãƒãƒ¼è¨­å®šå–å¾—
â”‚   â”‚   â””â”€â”€ chat/               # ãƒãƒ£ãƒƒãƒˆé–¢é€£ãƒ•ãƒƒã‚¯
â”‚   â”‚
â”‚   â”œâ”€â”€ context/                # ========== React Context ==========
â”‚   â”‚   â””â”€â”€ SettingsContext.tsx # è¨­å®šãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                  # ========== ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ==========
â”‚   â”‚   â”œâ”€â”€ api.ts              # APIå‘¼ã³å‡ºã—
â”‚   â”‚   â”œâ”€â”€ api-client.ts       # HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ sidecar.ts          # Tauriã‚µã‚¤ãƒ‰ã‚«ãƒ¼ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                  # ========== å‹å®šç¾© ==========
â”‚   â”‚   â”œâ”€â”€ index.ts            # ä¸»è¦å‹å®šç¾©
â”‚   â”‚   â””â”€â”€ tauri.d.ts          # Tauriå‹å®£è¨€
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                  # ========== ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ ==========
â”‚   â”‚   â”œâ”€â”€ Logs.tsx            # ãƒ­ã‚°ãƒ“ãƒ¥ãƒ¼ã‚¢
â”‚   â”‚   â””â”€â”€ Memory.tsx          # è¨˜æ†¶å¯è¦–åŒ–
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/                 # ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©
â”‚   â””â”€â”€ test/                   # ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
â”‚
â””â”€â”€ src-tauri/                  # ========== Tauriè¨­å®š ==========
    â”œâ”€â”€ tauri.conf.json         # Tauriè¨­å®š
    â”œâ”€â”€ Cargo.toml
    â”œâ”€â”€ build.rs
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ main.rs
    â”‚   â””â”€â”€ lib.rs
    â”œâ”€â”€ icons/                  # ã‚¢ãƒ—ãƒªã‚¢ã‚¤ã‚³ãƒ³
    â””â”€â”€ binaries/               # sidecarç”¨ãƒã‚¤ãƒŠãƒª
        â””â”€â”€ tepora-backend.exe  # Pythonãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè¡Œå½¢å¼
```

---

## ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### TeporaAppï¼ˆãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ï¼‰

`TeporaApp` ã¯V2ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ±åˆã—ã€çµ±ä¸€ã•ã‚ŒãŸAPIã‚’æä¾›ã—ã¾ã™ã€‚

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/core/app_v2.py`

```python
class TeporaApp:
    """
    V2ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
    
    è²¬å‹™:
    - å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åˆæœŸåŒ–ã¨çµ‚äº†å‡¦ç†
    - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†ã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
    - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
    """
    
    # ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
    @property
    def is_initialized(self) -> bool: ...
    @property
    def session_manager(self) -> SessionManager: ...
    @property
    def tool_manager(self) -> ToolManager: ...
    @property
    def llm_service(self) -> LLMService: ...
    @property
    def graph(self) -> TeporaGraph: ...
    
    # åˆæœŸåŒ–
    async def initialize(
        self,
        mcp_hub=None,
        download_manager: DownloadManager | None = None,
    ) -> bool:
        """
        å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åˆæœŸåŒ–
        
        åˆæœŸåŒ–é †åº:
        1. Logging
        2. Tool Manager
        3. Session Manager
        4. LLM Service
        5. Context Manager
        6. RAG Engine & Context Builder
        7. Graph
        """
    
    # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†
    async def process_message(
        self,
        session_id: str,
        message: str,
        *,
        mode: str = "direct",
        **kwargs,
    ) -> AsyncIterator[str]:
        """ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡¦ç†ã—ã€ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¿œç­”ã‚’è¿”ã™"""
    
    # ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
    async def shutdown(self) -> None:
        """ãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—"""
```

### TeporaGraphï¼ˆã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼‰

`TeporaGraph` ã¯LangGraphãƒ™ãƒ¼ã‚¹ã®ãƒ¡ã‚¤ãƒ³ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ã™ã€‚å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰ã«åŸºã¥ã„ã¦Chatã€Searchã€Agentãƒãƒ¼ãƒ‰ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã—ã¾ã™ã€‚

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/core/graph/runtime.py`

```mermaid
graph LR
    START([START]) --> ROUTER{ãƒ¢ãƒ¼ãƒ‰åˆ¤å®š}
    
    ROUTER -->|direct| CHAT[ChatNode<br/>ç›´æ¥å›ç­”]
    ROUTER -->|search| SEARCH[SearchNode<br/>Webæ¤œç´¢+è¦ç´„]
    ROUTER -->|agent| AGENT[AgentNode<br/>ReActãƒ«ãƒ¼ãƒ—]
    
    CHAT --> END([END])
    SEARCH --> END
    AGENT --> TOOL[Tool Execution]
    TOOL --> AGENT
    AGENT --> END
```

**ãƒãƒ¼ãƒ‰è©³ç´°**:

| ãƒãƒ¼ãƒ‰ | ãƒ•ã‚¡ã‚¤ãƒ« | è²¬å‹™ |
|--------|----------|------|
| `ChatNode` | `nodes/chat.py` | ç›´æ¥å¯¾è©±å¿œç­”ã‚’ç”Ÿæˆ |
| `SearchNode` | `nodes/search.py` | Webæ¤œç´¢å®Ÿè¡Œ â†’ RAGã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ§‹ç¯‰ â†’ è¦ç´„ç”Ÿæˆ |
| `AgentNode` | `nodes/react.py` | ReActãƒ«ãƒ¼ãƒ—ï¼ˆæ€è€ƒâ†’è¡Œå‹•â†’è¦³å¯Ÿï¼‰ |
| `ThinkingNode` | `nodes/thinking.py` | CoTï¼ˆChain of Thoughtï¼‰æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ç”Ÿæˆ |

### Thinking Mode (CoT)

V2ã§ã¯ã€è¤‡é›‘ãªæ¨è«–ã‚’å¿…è¦ã¨ã™ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¯¾ã—ã¦ **Thinking Mode (CoT)** ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

- **å‹•ä½œ**: `ThinkingNode` ãŒæœ€çµ‚å›ç­”ã®å‰ã«å®Ÿè¡Œã•ã‚Œã€ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã®æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
- **çµ±åˆ**: ç”Ÿæˆã•ã‚ŒãŸæ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ï¼ˆ`<thought_process>`ï¼‰ã¯ `AgentState` ã«ä¿å­˜ã•ã‚Œã€`ChatNode` ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«æ³¨å…¥ã•ã‚Œã¾ã™ã€‚
- **åˆ¶å¾¡**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ `thinking_mode: true` ã§æœ‰åŠ¹åŒ–ã•ã‚Œã¾ã™ã€‚

### AgentStateï¼ˆã‚°ãƒ©ãƒ•çŠ¶æ…‹ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/core/graph/state.py`

```python
class AgentState(TypedDict):
    """LangGraph state for agent execution"""
    
    # V2: Session identifier
    session_id: str
    
    # Core input and history
    input: str
    mode: str | None  # "direct" | "search" | "agent"
    chat_history: list[HumanMessage | AIMessage]
    
    # Agent ReAct loop state
    agent_scratchpad: list[BaseMessage]
    messages: list[BaseMessage]
    agent_outcome: str | None
    
    # EM-LLM Memory Pipeline
    recalled_episodes: list[dict] | None
    synthesized_memory: str | None
    
    # Search mode state
    search_queries: list[str] | None
    search_results: list[dict] | None
    search_attachments: list[dict] | None
    skip_web_search: bool | None
    
    # Generation metadata
    generation_logprobs: dict | list[dict] | None
```

### LLMServiceï¼ˆã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ãƒ•ã‚¡ã‚¯ãƒˆãƒªï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/core/llm/service.py`

V1ã® `LLMManager` ã‹ã‚‰ã®ä¸»ãªå¤‰æ›´ç‚¹:
- `_current_model_key` çŠ¶æ…‹ã‚’æ’é™¤
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆã”ã¨ã«ãƒ¢ãƒ‡ãƒ«é¸æŠï¼ˆã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ï¼‰
- ä¸¦è¡Œã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆ
- **ãƒ¢ãƒ‡ãƒ«ã‚­ãƒ¼å˜ä½ã®æ’ä»–åˆ¶å¾¡**ï¼ˆ`asyncio.Lock`ï¼‰ã§ãƒ¬ãƒ¼ã‚¹ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³é˜²æ­¢
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚µã‚¤ã‚º3**ã§è¤‡æ•°ãƒ¢ãƒ‡ãƒ«ã®åŒæ™‚ä¿æŒãŒå¯èƒ½

```python
class LLMService:
    """
    Stateless LLM Service - Factory pattern for model clients
    
    Key differences from V1 LLMManager:
    1. No `_current_model_key` state
    2. Model selection happens per-request
    3. Thread-safe for concurrent sessions
    4. Per-model-key locking prevents race conditions
    """
    
    _CACHE_SIZE = 3  # è¤‡æ•°ã‚»ãƒƒã‚·ãƒ§ãƒ³å¯¾å¿œ
    
    async def get_client(
        self,
        role: str,  # "character" or "executor"
        *,
        task_type: str = "default",
        model_id: str | None = None,
    ) -> BaseChatModel:
        """æŒ‡å®šã•ã‚ŒãŸãƒ­ãƒ¼ãƒ«ã®ãƒãƒ£ãƒƒãƒˆãƒ¢ãƒ‡ãƒ«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å–å¾—"""
    
    async def get_embedding_client(self) -> Embeddings:
        """åŸ‹ã‚è¾¼ã¿ãƒ¢ãƒ‡ãƒ«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å–å¾—"""
    
    def cleanup(self) -> None:
        """å…¨ãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—"""
```

**ä¸¦è¡Œæ€§æˆ¦ç•¥**:

| æ©Ÿèƒ½ | å®Ÿè£… |
|-----|------|
| ãƒ¢ãƒ‡ãƒ«èµ·å‹•ã®æ’ä»–åˆ¶å¾¡ | ãƒ¢ãƒ‡ãƒ«ã‚­ãƒ¼å˜ä½ã®`asyncio.Lock`ã§äºŒé‡èµ·å‹•ã‚’é˜²æ­¢ |
| ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç† | LRUé¢¨ã®è¿½ã„å‡ºã—ï¼ˆFIFOï¼‰ã€æœ€å¤§3ãƒ¢ãƒ‡ãƒ«ä¿æŒ |
| ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ• | `_cache_lock`ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¢ã‚¯ã‚»ã‚¹ã‚’ä¿è­· |

**å†…éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**:

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ãƒ•ã‚¡ã‚¤ãƒ« | è²¬å‹™ |
|--------------|----------|------|
| `LocalModelRunner` | `runner.py` | ãƒ­ãƒ¼ã‚«ãƒ«LLMå®Ÿè¡Œã®æŠ½è±¡ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆProtocolï¼‰ |
| `LlamaServerRunner` | `llama_runner.py` | llama.cppå®Ÿè£…ï¼ˆProcessManagerã‚’ãƒ©ãƒƒãƒ—ï¼‰ |
| `OllamaRunner` | `ollama_runner.py` | Ollama APIæ¥ç¶šå®Ÿè£…ï¼ˆãƒ¢ãƒ‡ãƒ«åãƒ™ãƒ¼ã‚¹ç®¡ç†ï¼‰ |
| `ProcessManager` | `process_manager.py` | llama-serverãƒ—ãƒ­ã‚»ã‚¹ã®èµ·å‹•ãƒ»åœæ­¢ãƒ»ç›£è¦– |
| `ClientFactory` | `client_factory.py` | LangChainäº’æ›ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”Ÿæˆ |
| `ModelRegistry` | `model_registry.py` | è¨­å®šã‹ã‚‰ãƒ¢ãƒ‡ãƒ«ãƒ‘ã‚¹ã‚’è§£æ±º |

### RAGEngine + RAGContextBuilder

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/core/rag/engine.py`, `src/core/rag/context_builder.py`

```mermaid
graph TB
    subgraph RAGEngine
        Query[ã‚¯ã‚¨ãƒª] --> FetchWeb[Web Fetch<br/>native_web_fetch]
        Query --> ProcessAtt[æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†]
        FetchWeb --> Split[ãƒ†ã‚­ã‚¹ãƒˆåˆ†å‰²<br/>RecursiveCharacterTextSplitter]
        ProcessAtt --> Split
        Split --> Chunks[chunk_texts, chunk_sources]
    end
    
    subgraph RAGContextBuilder
        Chunks --> Format[ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ•´å½¢]
        Format --> Output[RAG Context String]
    end
```

```python
class RAGEngine:
    """
    RAG retrieval engine for collecting chunks from various sources.
    
    Handles:
    - Web content fetching (via injected tool executor)
    - Attachment processing
    - Text chunking
    """
    
    async def collect_chunks(
        self,
        *,
        top_result_url: str | None = None,
        attachments: list[dict] | None = None,
        tool_executor: Callable | None = None,
        skip_web_fetch: bool = False,
    ) -> tuple[list[str], list[str]]:
        """
        Returns:
            Tuple of (chunk_texts, chunk_sources)
        """
```

### ContextWindowManager

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/core/context/window.py`

```python
class ContextWindowManager:
    """
    Manages context window for LLM prompts.
    
    Responsible for trimming conversation history to fit within
    token limits while preserving recent context.
    """
    
    async def build_local_context(
        self,
        full_history: list[BaseMessage],
        max_tokens: int | None = None,
        token_counter: Callable | None = None,
    ) -> tuple[list[BaseMessage], int]:
        """
        Build local context from full history within token limits.
        
        Returns:
            Tuple of (trimmed_messages, total_token_count)
        """
```

### ToolManager

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/core/tools/manager.py`

```python
class ToolManager:
    """
    MCPãƒ„ãƒ¼ãƒ«ãŠã‚ˆã³ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ„ãƒ¼ãƒ«ã‚’çµ±åˆçš„ã«ç®¡ç†
    
    è²¬å‹™:
    - è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰MCPæ¥ç¶šã‚’æ§‹ç¯‰ã—ã€ãƒ„ãƒ¼ãƒ«ã‚’ç™ºè¦‹
    - ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ„ãƒ¼ãƒ«(Webæ¤œç´¢ãªã©)ã®æº–å‚™
    - ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œã¨ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆåˆ¶å¾¡
    """
    
    async def aexecute_tool(
        self,
        tool_name: str,
        tool_args: dict,
    ) -> str:
        """éåŒæœŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰ãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè¡Œ"""
    
    def list_tools(self) -> list[str]:
        """åˆ©ç”¨å¯èƒ½ãªãƒ„ãƒ¼ãƒ«åã®ãƒªã‚¹ãƒˆã‚’å–å¾—"""
    
    def get_tool(self, tool_name: str) -> BaseTool | None:
        """æŒ‡å®šã•ã‚ŒãŸåå‰ã®ãƒ„ãƒ¼ãƒ«ã‚’å–å¾—"""
```

**ãƒ„ãƒ¼ãƒ«ãƒ—ãƒ­ãƒã‚¤ãƒ€**:

| ãƒ—ãƒ­ãƒã‚¤ãƒ€ | ãƒ•ã‚¡ã‚¤ãƒ« | æä¾›ãƒ„ãƒ¼ãƒ« |
|-----------|----------|-----------|
| `NativeToolProvider` | `native.py` | `native_google_search`, `native_duckduckgo`, `native_web_fetch` |
| `McpToolProvider` | `mcp.py` | MCPã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰å‹•çš„ã«å–å¾— |

### EMLLMIntegratorï¼ˆã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰è¨˜æ†¶ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/core/em_llm/integrator.py`

ICLR 2025æ¡æŠè«–æ–‡ã€ŒEM-LLMã€ã®å®Ÿè£…ã€‚äººé–“ã®ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰è¨˜æ†¶ã‚’LLMã§å†ç¾ã—ã¾ã™ã€‚

```mermaid
graph TB
    subgraph Storage["ä¿å­˜ãƒ•ãƒ­ãƒ¼"]
        Input[ä¼šè©±å…¥åŠ›] --> Segment[EMEventSegmenter<br/>Surprise-based Segmentation]
        Segment --> Boundary[å¢ƒç•Œç²¾å¯†åŒ–]
        Boundary --> RepTokens[ä»£è¡¨ãƒˆãƒ¼ã‚¯ãƒ³é¸æŠ]
        RepTokens --> Embed[åŸ‹ã‚è¾¼ã¿è¨ˆç®—]
        Embed --> Store[ChromaDBä¿å­˜]
    end
    
    subgraph Retrieval["æ¤œç´¢ãƒ•ãƒ­ãƒ¼"]
        Query[ã‚¯ã‚¨ãƒª] --> Stage1[Stage 1: é¡ä¼¼æ€§æ¤œç´¢<br/>Similarity-based]
        Query --> Stage2[Stage 2: é€£ç¶šæ€§æ¤œç´¢<br/>Contiguity-based]
        Stage1 --> Merge[2æ®µéšçµ±åˆ]
        Stage2 --> Merge
        Merge --> Context[ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ³¨å…¥]
    end
```

```python
class EMLLMIntegrator:
    """
    Integration class for EM-LLM with existing system.
    
    Orchestrates:
    1. Event segmentation (surprise-based or semantic)
    2. Boundary refinement
    3. Representative token selection
    4. Two-stage retrieval
    """
    
    async def process_logprobs_for_memory(
        self,
        logprobs_content: list[dict],
    ) -> list[EpisodicEvent]:
        """Process LLM logprobs for surprise-based memory formation"""
    
    async def retrieve_relevant_memories_for_query(
        self,
        query: str,
    ) -> list[dict]:
        """Retrieve memories using two-stage retrieval"""
    
    def get_memory_statistics(self) -> dict:
        """Get EM-LLM memory statistics"""
```

### SessionManager

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/core/system/session.py`

```python
class SessionManager:
    """
    ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç®¡ç†
    
    è²¬å‹™:
    - ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒªã‚½ãƒ¼ã‚¹ã®é›†ç´„
    - å±¥æ­´ãƒ»ãƒ™ã‚¯ãƒˆãƒ«ã‚¹ãƒˆã‚¢ã¸ã®å§”è­²
    """
    
    def get_session_resources(self, session_id: str) -> SessionResources:
        """ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«é–¢é€£ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã‚’å–å¾—"""
    
    def release_session(self, session_id: str) -> bool:
        """ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒªã‚½ãƒ¼ã‚¹ã‚’è§£æ”¾"""
    
    @property
    def active_session_count(self) -> int: ...
    def list_active_sessions(self) -> list[str]: ...
```

---

## ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### çŠ¶æ…‹ç®¡ç†

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ **Zustand** ã¨ **TanStack Query** ã‚’çµ„ã¿åˆã‚ã›ãŸçŠ¶æ…‹ç®¡ç†ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

```mermaid
graph TB
    subgraph "Zustand Stores (Client State)"
        Chat[chatStore<br/>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸, ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°]
        Session[sessionStore<br/>ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§]
        WS[websocketStore<br/>WebSocketæ¥ç¶š]
    end
    
    subgraph "TanStack Query (Server State)"
        Config[è¨­å®šãƒ‡ãƒ¼ã‚¿]
        MCPStatus[MCPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹]
        Models[ãƒ¢ãƒ‡ãƒ«æƒ…å ±]
    end
    
    subgraph "Components"
        ChatInterface
        SessionHistory
        Settings
    end
    
    WS <-->|WebSocket| Backend
    Chat --> ChatInterface
    Session --> SessionHistory
    Config --> Settings
```

### chatStore

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/stores/chatStore.ts`

```typescript
interface ChatState {
  // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  messages: Message[];
  isProcessing: boolean;
  error: string | null;
  
  // ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãƒ­ã‚°ï¼ˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‡¦ç†è¡¨ç¤ºç”¨ï¼‰
  activityLog: AgentActivity[];
  
  // æ¤œç´¢çµæœ
  searchResults: SearchResult[];
  
  // ãƒ¡ãƒ¢ãƒªçµ±è¨ˆ
  memoryStats: MemoryStats | null;
  
  // ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒãƒƒãƒ•ã‚¡ï¼ˆå†…éƒ¨ï¼‰
  _streamBuffer: string;
  _streamMetadata: StreamingMetadata | null;
}

interface ChatActions {
  addMessage: (message: Message) => void;
  addUserMessage: (content: string, mode: ChatMode, attachments?: Attachment[]) => void;
  setMessages: (messages: Message[]) => void;
  clearMessages: () => void;
  
  // Streaming
  handleStreamChunk: (content: string, metadata?: StreamingMetadata) => void;
  flushStreamBuffer: () => void;
  finalizeStream: () => void;
  
  // State
  setIsProcessing: (isProcessing: boolean) => void;
  setError: (error: string) => void;
  clearError: () => void;
  
  // Activity
  updateActivity: (activity: AgentActivity) => void;
  clearActivityLog: () => void;
  
  // Other
  setSearchResults: (results: SearchResult[]) => void;
  setMemoryStats: (stats: MemoryStats | null) => void;
  reset: () => void;
}
```

### sessionStore

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/stores/sessionStore.ts`

```typescript
interface SessionState {
  sessions: Session[];
  currentSessionId: string | null;
  isLoading: boolean;
}

interface SessionActions {
  setSessions: (sessions: Session[]) => void;
  setCurrentSessionId: (id: string | null) => void;
  addSession: (session: Session) => void;
  updateSession: (id: string, updates: Partial<Session>) => void;
  removeSession: (id: string) => void;
}
```

### websocketStore

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/stores/websocketStore.ts`

```typescript
interface WebSocketState {
  isConnected: boolean;
  isConnecting: boolean;
  error: string | null;
  socket: WebSocket | null;
}

interface WebSocketActions {
  connect: (url: string, token: string) => void;
  disconnect: () => void;
  sendMessage: (message: WebSocketMessage) => void;
  setSession: (sessionId: string) => void;
  stopGeneration: () => void;
}
```

### ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ãƒ•ã‚¡ã‚¤ãƒ« | è²¬å‹™ |
|---------------|----------|------|
| `Layout` | `Layout.tsx` | ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼‹ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢ï¼‰ |
| `ChatInterface` | `ChatInterface.tsx` | ãƒãƒ£ãƒƒãƒˆãƒ“ãƒ¥ãƒ¼å…¨ä½“ã®åˆ¶å¾¡ |
| `MessageList` | `MessageList.tsx` | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒªã‚¹ãƒˆã®è¡¨ç¤º |
| `MessageBubble` | `MessageBubble.tsx` | å€‹åˆ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡¨ç¤º |
| `InputArea` | `InputArea.tsx` | ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ï¼‹æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ« |
| `DialControl` | `DialControl.tsx` | Chat / Search / Agent ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ |
| `PersonaSwitcher` | `PersonaSwitcher.tsx` | ãƒšãƒ«ã‚½ãƒŠåˆ‡æ›¿UI |
| `AgentStatus` | `AgentStatus.tsx` | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‡¦ç†çŠ¶æ…‹ã®è¡¨ç¤º |
| `SetupWizard` | `SetupWizard/` | åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼ |
| `SessionHistory` | `SessionHistory/` | ã‚»ãƒƒã‚·ãƒ§ãƒ³å±¥æ­´ç®¡ç† |

---

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†ãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant User
    participant Frontend
    participant WebSocket
    participant FastAPI
    participant TeporaApp
    participant Graph
    participant LLM
    
    User->>Frontend: å…¥åŠ›é€ä¿¡
    Frontend->>WebSocket: message event
    WebSocket->>FastAPI: WebSocket message
    FastAPI->>TeporaApp: process_message()
    TeporaApp->>Graph: process()
    
    Graph->>Graph: ãƒ¢ãƒ¼ãƒ‰åˆ¤å®š
    alt direct mode
        Graph->>LLM: get_client("character")
        LLM-->>Graph: stream response
    else search mode
        Graph->>Graph: Webæ¤œç´¢
        Graph->>Graph: RAGã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ§‹ç¯‰
        Graph->>LLM: stream response
    else agent mode
        loop ReAct Loop
            Graph->>LLM: æ€è€ƒ
            Graph->>Graph: ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
        end
    end
    
    loop Streaming
        Graph-->>TeporaApp: chunk
        TeporaApp-->>FastAPI: chunk
        FastAPI-->>WebSocket: chunk event
        WebSocket-->>Frontend: handleStreamChunk()
        Frontend-->>User: è¡¨ç¤ºæ›´æ–°
    end
    
    Graph-->>TeporaApp: done
    TeporaApp-->>FastAPI: done
    FastAPI-->>WebSocket: done event
    WebSocket-->>Frontend: finalizeStream()
```

---

## APIä»•æ§˜

### WebSocket

**æ¥ç¶š**:
```
ws://127.0.0.1:{port}/ws?token={session_token}
```

**ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ â†’ ã‚µãƒ¼ãƒãƒ¼**:

| type | èª¬æ˜ | ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ |
|------|------|-----------|
| `message` | é€šå¸¸ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ | `{ message, mode, sessionId, attachments?, skipWebSearch? }` |
| `stop` | å®Ÿè¡Œã‚­ãƒ£ãƒ³ã‚»ãƒ« | `{}` |
| `get_stats` | ãƒ¡ãƒ¢ãƒªçµ±è¨ˆè¦æ±‚ | `{}` |
| `set_session` | ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ‡æ›¿ | `{ sessionId }` |
| `tool_confirmation_response` | ãƒ„ãƒ¼ãƒ«æ‰¿èªå¿œç­” | `{ requestId, approved }` |

**ã‚µãƒ¼ãƒãƒ¼ â†’ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ**:

| type | èª¬æ˜ | ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ |
|------|------|-----------|
| `chunk` | ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¿œç­” | `{ message, mode?, nodeId?, agentName? }` |
| `status` | å‡¦ç†çŠ¶æ…‹æ›´æ–° | `{ status, message }` |
| `activity` | ãƒãƒ¼ãƒ‰é€²æ— | `{ data: { id, status, message } }` |
| `history` | ãƒãƒ£ãƒƒãƒˆå±¥æ­´ | `{ messages: [...] }` |
| `search_results` | æ¤œç´¢çµæœ | `{ data: [...] }` |
| `tool_confirmation_request` | ãƒ„ãƒ¼ãƒ«æ‰¿èªè¦æ±‚ | `{ data: { requestId, toolName, toolArgs, description } }` |
| `done` | å‡¦ç†å®Œäº† | `{}` |
| `error` | ã‚¨ãƒ©ãƒ¼ | `{ message }` |
| `stats` | ãƒ¡ãƒ¢ãƒªçµ±è¨ˆ | `{ data: {...} }` |
| `download_progress` | ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰é€²æ— | `{ data: { status, progress, ... } }` |

### REST API

#### åŸºæœ¬API

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|---------------|------|
| `GET` | `/health` | ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ |
| `GET` | `/api/status` | ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
| `GET` | `/api/config` | è¨­å®šå–å¾— |
| `POST` | `/api/config` | è¨­å®šæ›´æ–°ï¼ˆå…¨ä½“ï¼‰ |
| `PATCH` | `/api/config` | è¨­å®šæ›´æ–°ï¼ˆéƒ¨åˆ†ï¼‰ |
| `GET` | `/api/logs` | ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ |
| `GET` | `/api/logs/{filename}` | ãƒ­ã‚°å†…å®¹å–å¾— |
| `POST` | `/api/shutdown` | ã‚µãƒ¼ãƒãƒ¼ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ |

#### ã‚»ãƒƒã‚·ãƒ§ãƒ³API

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|---------------|------|
| `GET` | `/api/sessions` | ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§ |
| `POST` | `/api/sessions` | æ–°è¦ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ |
| `GET` | `/api/sessions/{id}` | ã‚»ãƒƒã‚·ãƒ§ãƒ³è©³ç´° |
| `PATCH` | `/api/sessions/{id}` | ã‚»ãƒƒã‚·ãƒ§ãƒ³åæ›´æ–° |
| `DELETE` | `/api/sessions/{id}` | ã‚»ãƒƒã‚·ãƒ§ãƒ³å‰Šé™¤ |

#### MCP API

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|---------------|------|
| `GET` | `/api/mcp/status` | æ¥ç¶šã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
| `GET` | `/api/mcp/config` | MCPè¨­å®šå–å¾— |
| `POST` | `/api/mcp/config` | MCPè¨­å®šæ›´æ–° |
| `GET` | `/api/mcp/store` | ãƒ¬ã‚¸ã‚¹ãƒˆãƒªï¼ˆåˆ©ç”¨å¯èƒ½ã‚µãƒ¼ãƒãƒ¼ä¸€è¦§ï¼‰ |
| `GET` | `/api/mcp/policy` | æ¥ç¶šãƒãƒªã‚·ãƒ¼ |
| `PATCH` | `/api/mcp/policy` | ãƒãƒªã‚·ãƒ¼æ›´æ–° |
| `POST` | `/api/mcp/install/preview` | ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ |
| `POST` | `/api/mcp/install/confirm` | ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª |
| `POST` | `/api/mcp/servers/{name}/enable` | ã‚µãƒ¼ãƒãƒ¼æœ‰åŠ¹åŒ– |
| `POST` | `/api/mcp/servers/{name}/disable` | ã‚µãƒ¼ãƒãƒ¼ç„¡åŠ¹åŒ– |
| `DELETE` | `/api/mcp/servers/{name}` | ã‚µãƒ¼ãƒãƒ¼å‰Šé™¤ |

#### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—API

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|---------------|------|
| `POST` | `/api/setup/init` | ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—åˆæœŸåŒ– |
| `GET` | `/api/setup/requirements` | è¦ä»¶ãƒã‚§ãƒƒã‚¯ |
| `GET` | `/api/setup/default-models` | æ¨å¥¨ãƒ¢ãƒ‡ãƒ«ãƒªã‚¹ãƒˆ |
| `POST` | `/api/setup/run` | ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—é–‹å§‹ |
| `GET` | `/api/setup/progress` | é€²æ—ç¢ºèª |
| `POST` | `/api/setup/finish` | ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº† |
| `GET` | `/api/setup/models` | åˆ©ç”¨å¯èƒ½ãƒ¢ãƒ‡ãƒ«ä¸€è¦§ |
| `POST` | `/api/setup/model/download` | ãƒ¢ãƒ‡ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ |
| `DELETE` | `/api/setup/model/{id}` | ãƒ¢ãƒ‡ãƒ«å‰Šé™¤ |

---

## è¨­å®šã‚·ã‚¹ãƒ†ãƒ 

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```mermaid
graph TB
    subgraph Runtime["ãƒ©ãƒ³ã‚¿ã‚¤ãƒ è¨­å®š"]
        ConfigYml[config.yml<br/>ãƒ¡ã‚¤ãƒ³è¨­å®š]
        SecretsYml[secrets.yaml<br/>æ©Ÿå¯†è¨­å®š]
        McpJson[config/mcp_tools_config.json<br/>MCPæ¥ç¶šè¨­å®š]
    end
  
    subgraph Defaults["ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®šç¾©"]
        Schema[src/core/config/schema.py<br/>Pydanticã‚¹ã‚­ãƒ¼ãƒ]
        SeedJson[src/core/mcp/seed.json<br/>MCPã‚µãƒ¼ãƒãƒ¼ã‚«ã‚¿ãƒ­ã‚°]
    end
  
    Schema -->|ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤| ConfigYml
    SeedJson -->|ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã‚³ãƒ”ãƒ¼| McpJson
```

### config.yml ä¸»è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³

```yaml
app:
  max_input_length: 10000
  graph_recursion_limit: 50
  tool_execution_timeout: 120
  tool_approval_timeout: 300
  web_fetch_max_chars: 6000
  language: "ja"
  nsfw_enabled: false

server:
  host: "127.0.0.1"

tools:
  google_search_api_key: "YOUR_KEY"  # Optional
  google_search_engine_id: "YOUR_CX"

privacy:
  allow_web_search: false
  redact_pii: true  # å¤–éƒ¨é€ä¿¡ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰PIIè‡ªå‹•å‰Šé™¤

model_download:
  require_allowlist: false
  warn_on_unlisted: true
  require_revision: true

llm_manager:
  health_check_timeout: 60

models_gguf:
  gemma_3n:
    path: "models/gemma-3n-E4B-it-IQ4_XS.gguf"
    port: 8088
    n_ctx: 8192
    n_gpu_layers: -1

em_llm:
  surprise_gamma: 1.0
  total_retrieved_events: 4

characters:
  bunny_girl:
    name: "Bunny Girl"
    description: "..."
    system_prompt: "..."

professionals:
  professional:
    name: "Professional"
    description: "..."
    system_prompt: "..."
```

### å®Ÿè¡Œæ™‚ãƒ‡ãƒ¼ã‚¿é…ç½®

```
USER_DATA_DIR/
â”œâ”€â”€ config.yml              # ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š
â”œâ”€â”€ secrets.yaml            # æ©Ÿå¯†è¨­å®šï¼ˆAPIã‚­ãƒ¼ç­‰ï¼‰
â”œâ”€â”€ tepora_chat.db          # SQLite: ãƒãƒ£ãƒƒãƒˆå±¥æ­´
â”œâ”€â”€ chroma_db/              # ChromaDB: EM-LLM / RAG
â”œâ”€â”€ logs/                   # ã‚¢ãƒ—ãƒªãƒ­ã‚°
â””â”€â”€ config/
    â”œâ”€â”€ mcp_tools_config.json   # MCPæ¥ç¶šè¨­å®š
    â””â”€â”€ .mcp_trusted_hashes     # MCPä¿¡é ¼ãƒãƒƒã‚·ãƒ¥
```

**é…å¸ƒç‰ˆãƒ‡ãƒ¼ã‚¿é…ç½®**:
- Windows: `%LOCALAPPDATA%\Tepora`
- macOS: `~/Library/Application Support/Tepora`
- Linux: `~/.local/share/tepora`

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### èªè¨¼

| å¯¾è±¡ | æ–¹å¼ | èª¬æ˜ |
|------|------|------|
| **REST API** | `x-api-key` ãƒ˜ãƒƒãƒ€ãƒ¼ | æ©Ÿå¯†æ“ä½œã«å¿…é ˆ |
| **WebSocket** | ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ `token` | æ¥ç¶šæ™‚ã«èªè¨¼ |
| **Originæ¤œè¨¼** | Allowlist | WebSocketã®Originã‚’æ¤œè¨¼ |

> [!NOTE]
> `TEPORA_ENV=development` ã®å ´åˆã€ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ã¯ã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã¾ã™ã€‚

### MCPã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

| æ©Ÿèƒ½ | èª¬æ˜ |
|------|------|
| **2æ®µéšã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«** | previewï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰â†’ confirmï¼ˆç¢ºèªï¼‰ã®2æ®µéšãƒ•ãƒ­ãƒ¼ |
| **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç„¡åŠ¹** | æ–°è¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚µãƒ¼ãƒãƒ¼ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ç„¡åŠ¹çŠ¶æ…‹ |
| **æ¥ç¶šãƒãƒªã‚·ãƒ¼** | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ `LOCAL_ONLY`ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼/stdioã®ã¿ï¼‰ |
| **ãƒ„ãƒ¼ãƒ«æ‰¿èª** | MCPãƒ„ãƒ¼ãƒ«ã¯ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆå›ä½¿ç”¨æ™‚ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‰¿èªãŒå¿…è¦ |
| **å±é™ºã‚³ãƒãƒ³ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯** | `sudo` ç­‰ã®å±é™ºã‚³ãƒãƒ³ãƒ‰ã¯ãƒ–ãƒ­ãƒƒã‚¯ |

### ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·

| æ©Ÿèƒ½ | èª¬æ˜ |
|------|------|
| **PIIä¿è­·** | å¤–éƒ¨é€šä¿¡å‰ã«å€‹äººæƒ…å ±ï¼ˆãƒ¡ãƒ¼ãƒ«ã€é›»è©±ç•ªå·ç­‰ï¼‰ã‚’è‡ªå‹•ãƒªãƒ€ã‚¯ã‚·ãƒ§ãƒ³ |
| **ãƒ­ãƒ¼ã‚«ãƒ«å‡¦ç†** | å…¨LLMå‡¦ç†ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Œçµ |
| **ãƒ­ã‚°ãƒªãƒ€ã‚¯ã‚·ãƒ§ãƒ³** | ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚‚PIIã‚’å‰Šé™¤ |

### ãƒ¢ãƒ‡ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

| æ©Ÿèƒ½ | èª¬æ˜ |
|------|------|
| **Allowlist** | è¨±å¯ã•ã‚ŒãŸãƒªãƒã‚¸ãƒˆãƒª/ã‚ªãƒ¼ãƒŠãƒ¼ã‹ã‚‰ã®ã¿ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ |
| **ãƒªãƒ“ã‚¸ãƒ§ãƒ³å›ºå®š** | ç‰¹å®šãƒªãƒ“ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šï¼ˆã‚¿ãƒ³ãƒ‘ãƒªãƒ³ã‚°é˜²æ­¢ï¼‰ |
| **SHA256æ¤œè¨¼** | æä¾›æ™‚ã¯ãƒãƒƒã‚·ãƒ¥æ¤œè¨¼ã‚’å®Ÿè¡Œ |
| **æœªç™»éŒ²è­¦å‘Š** | Allowlistå¤–ã¯è­¦å‘Š + åŒæ„ã‚’å¿…é ˆåŒ– |
| **ãƒã‚¤ãƒŠãƒªæ¤œè¨¼** | llama.cppãƒã‚¤ãƒŠãƒªã¯SHA256ãƒ€ã‚¤ã‚¸ã‚§ã‚¹ãƒˆã§å®Œå…¨æ€§æ¤œè¨¼ |

---

## è£œè¶³

### V1ã‹ã‚‰V2ã¸ã®ä¸»ãªå¤‰æ›´ç‚¹

| é …ç›® | V1 | V2 |
|------|----|----|
| **ãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰** | `TeporaCoreApp` | `TeporaApp` (`app_v2.py`) |
| **LLMç®¡ç†** | `LLMManager` (stateful) | `LLMService` (stateless) |
| **ã‚°ãƒ©ãƒ•** | `AgentCore` | `TeporaGraph` |
| **RAG** | ConversationNodeså†…ã«æ··åœ¨ | `RAGEngine` + `RAGContextBuilder` ã«åˆ†é›¢ |
| **ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ** | ConversationNodeså†…ã«æ··åœ¨ | `ContextWindowManager` ã«åˆ†é›¢ |
| **çŠ¶æ…‹ç®¡ç†(FE)** | React Context + hooks | Zustand stores |
| **V1ã‚³ãƒ¼ãƒ‰** | `æ ¼ç´/core_v1_archive/` | å®Ÿè¡ŒçµŒè·¯ã‹ã‚‰é™¤å¤–ï¼ˆV2ã®ã¿ï¼‰ |

> [!TIP]
> V1äº’æ›ã®ãŸã‚ã€`TeporaApp` ã«ã¯ `process_user_request()` ã‚„ `cleanup()` ãªã©ã®V1äº’æ›ãƒ¡ã‚½ãƒƒãƒ‰ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

### ä»Šå¾Œã®æ‹¡å¼µäºˆå®š

- **Agent Module**: å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆCoding, Researchï¼‰ã®SubGraphå®Ÿè£…
- **A2A Protocol**: Agent-to-Agenté€šä¿¡æ©Ÿèƒ½
- **Session-Scoped RAG**: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã«ã‚ˆã‚‹ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ†é›¢
