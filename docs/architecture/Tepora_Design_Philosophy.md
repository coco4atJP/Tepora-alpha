# Tepora - Design Philosophy

## 1. Purpose / Context
Teporaは「コンシューマーハードウェアで動作する、真のパーソナルAIエージェントの実用化」を目指すプロジェクトである。
（※プロジェクトの核心的なビジョンについては [Tepora_Project_Vision.md](./Tepora_Project_Vision.md) を参照）

本ドキュメントは、そのビジョンを実現する過程で、日々直面する無数の技術的判断において従うべき「羅針盤（哲学・原則）」を定義する。
“温かみのあるAIパートナー”として、ローカル環境でユーザーのプライバシーと体験品質を両立するために、我々は何を優先し、何を捨てるのかをここに記す。

## 2. Core Principles（最優先の判断基準）
### P1. Local First / Privacy First
- **データ主権の尊重:** 可能な限り処理・データはローカル完結させる。
- **透明性:** 外部送信が発生する（検索など）場合は、必ずユーザーに分かる形で明示し、最小化する。

### P2. Production Ready（実験より運用品質）
- **堅牢性:** 例外を握り潰さず、適切なログ・復旧導線・失敗時UXを設計する。
- **保守性:** “動く”ことよりも “壊れない/直せる” ことを重視する（観測性・テスト・境界設計）。

### P3. Hardware Agnostic
- **民主化された動作:** 高価なハードウェアを前提とせず、CPUのみでも最低限の体験が成立するフォールバックを持つ。
- **Graceful Degradation:** リソース不足時は、機能全体を停止させるのではなく、重い処理を段階的に劣化させて動作を継続させる。

### P4. Modular Design（差し替え可能性）
- **疎結合:** LLM / Memory / Tools / UI を独立したモジュールとして扱い、特定の技術・モデルにロックインされない設計とする。
- **契約プログラミング:** 境界をまたぐ部分は「インターフェース」と「契約（入力/出力/失敗）」を先に定義する。

### P5. Warm & Calm UX（紅茶・喫茶店コンセプト）
- **精神的安全性:** 早さや効率だけでなく、安心感・分かりやすさ・落ち着きを優先する。
- **正直なAI:** 不確実なことは「分からない」と正直に伝え、最終的な判断の権利をユーザーに残す。

## 3. Non-goals（やらないこと）
- **万能の追求:** 特化型ツールの集合体を目指し、“全部入り万能AI”を最初から狙わない。
- **クラウド依存:** クラウド前提の常時接続設計はしない（インターネットはあくまで「拡張機能」）。
- **ブラックボックスな自動化:** 「魔法」のような自動化より、プロセスの見える「納得感」のある自動化を優先する。

## 4. Design Constraints（設計上の縛り）
- **セキュリティ:** ローカルデータの扱い、権限、秘密情報の露出を最優先で防ぐ。
- **データ:** 永続化データは将来的な構造変更（マイグレーション）を常に想定する。
- **失敗の常態化:** ネットワーク切断、モデルの幻覚、ツール実行エラーは“異常”ではなく“日常”として扱う。

## 5. Architectural Invariants（破ってはいけないルール）
- **UI/Logic分離:** UIコンポーネントはCoreロジック（LLM操作など）を直接持たない（境界はAPI/WSで分ける）。
- **監査可能性:** Tool実行は全てログに残り、ユーザーが「何を・いつ・なぜ実行したか」を後から追跡できるようにする。
- **情報の質:** Memory（EM-LLM）へ投入する情報は厳選し、ゴミデータでコンテキストを汚染しない仕組みを持つ。

## 6. Trade-offs（迷ったときの優先順位）
原則： **Privacy/Correctness (正しさ・守秘) > Reliability (確実さ) > UX (心地よさ) > Performance (速さ) > Fancy features (新機能)**

## 7. Definition of Done（完了条件）
- **ログ:** 主要な失敗ケースがログで追えること。
- **テスト:** 重要ロジックにユニットテストまたは契約テストが存在すること。
- **ドキュメント:** アーキテクチャに影響する変更には、ADR (Architecture Decision Record) を残すこと。
